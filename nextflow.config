// Configuration for Batch NIMS Processing Workflow

plugins {
    id 'nf-nim@0.2.0'
    id 'nf-schema@2.5.1'
}

validation {
  help {
    enabled = true
  }
}

// Workflow parameters
params {
    // Dataset and processing options
    input = "${projectDir}/pdb_dataset_valid.csv"
    max_structures = 0  // 0 = process all, otherwise limit to N structures
    rfdiffusion_batch_size = 10
    output_dir = "batch_results"
    
    // RFDiffusion parameters
    diffusion_steps = 15
    
    // Error handling
    max_retries = 3
    retry_delay = 30
}

// Process configuration
process {
    // Default settings for all processes
    errorStrategy = 'retry'
    maxRetries = 3
}


// Manifest
manifest {
    name = 'Batch NIMS Processing Workflow'
    description = 'Massively parallel protein structure analysis using NVIDIA NIMS RFDiffusion service'
    mainScript = 'main.nf'
    nextflowVersion = '>=25.04.0'
    version = '1.0.0'
}

// Optional: Configure custom NIM endpoints if needed
// nim {
//     rfdiffusion {
//         endpoint = 'http://your-custom-server:8080/biology/ipd/rfdiffusion/generate'
//     }
// }
